<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DIRT Citizen Science Module: dirt_datatable.table_schema.inc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DIRT Citizen Science Module
   </div>
   <div id="projectbrief">Custom Drupal module for DIRT Citizen Science Data Portal</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_373cf8ff2a743a0bc06d3bb970e791d0.html">dirt_datatable</a></li><li class="navelem"><a class="el" href="dir_f307076aedee02878fe19bad62cfdf78.html">includes</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dirt_datatable.table_schema.inc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a449f729d1e50c581e40927f5ed37e5bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#a449f729d1e50c581e40927f5ed37e5bb">dirt_datatable_get_table_schema</a> ()</td></tr>
<tr class="separator:a449f729d1e50c581e40927f5ed37e5bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d2b9b69a657e7621354e0098fc3ada3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#a5d2b9b69a657e7621354e0098fc3ada3">dirt_datatable_get_table_survey_fields</a> ()</td></tr>
<tr class="separator:a5d2b9b69a657e7621354e0098fc3ada3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1f9a7bc5d7feaccafb207bb82e91f66"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#ac1f9a7bc5d7feaccafb207bb82e91f66">dirt_datatable_get_schema_info_from_field</a> ($field_name, $delta=NULL)</td></tr>
<tr class="separator:ac1f9a7bc5d7feaccafb207bb82e91f66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad42887cff32d2bf1f63b6ac9cb67de60"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#ad42887cff32d2bf1f63b6ac9cb67de60">dirt_datatable_get_column_info_from_field</a> ($entity_type, $field_name, $bundle_name, $survey_type=NULL, $delta=NULL, $max_delta=NULL)</td></tr>
<tr class="separator:ad42887cff32d2bf1f63b6ac9cb67de60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c6181508a273c5cf2c61f6c18727e5e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#a6c6181508a273c5cf2c61f6c18727e5e">dirt_datatable_get_column_metadata_from_active_node_fields</a> ($schema_only=FALSE)</td></tr>
<tr class="separator:a6c6181508a273c5cf2c61f6c18727e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2bc2ba96af1c727040c5968114c5598"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#aa2bc2ba96af1c727040c5968114c5598">_dirt_datatable_get_column_metadata_from_active_node_field</a> ($field_name, $schema_only)</td></tr>
<tr class="separator:aa2bc2ba96af1c727040c5968114c5598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7b7fb145809b5d03fd4ca88f513e72c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#aa7b7fb145809b5d03fd4ca88f513e72c">_dirt_datatable_add_column_to_data_table_schema</a> ($schema_info, &amp;$schema)</td></tr>
<tr class="separator:aa7b7fb145809b5d03fd4ca88f513e72c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac72f76262f32a91445409599dba21090"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#ac72f76262f32a91445409599dba21090">dirt_datatable_get_suggested_length_for_field</a> ($field_name)</td></tr>
<tr class="separator:ac72f76262f32a91445409599dba21090"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab441635bc7da4323a7810bdd2541163b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#ab441635bc7da4323a7810bdd2541163b">dirt_datatable_get_suggested_label</a> ($label, $field_name, $bundle_name, $delta)</td></tr>
<tr class="separator:ab441635bc7da4323a7810bdd2541163b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab527de6cffbcf5664354269dacc6757f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#ab527de6cffbcf5664354269dacc6757f">dirt_datatable_get_suggested_group_for_field</a> ($field_name)</td></tr>
<tr class="separator:ab527de6cffbcf5664354269dacc6757f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd9f0909a04d9c05d36d30086f482733"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#afd9f0909a04d9c05d36d30086f482733">dirt_datatable_get_suggested_filter_groups</a> ()</td></tr>
<tr class="separator:afd9f0909a04d9c05d36d30086f482733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3030e2c6bb10f5407fe9b013a145eb61"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#a3030e2c6bb10f5407fe9b013a145eb61">dirt_datatable_get_suggested_column_groups</a> ()</td></tr>
<tr class="separator:a3030e2c6bb10f5407fe9b013a145eb61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff79e117540ff2f265041fbd3a313f94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirt__datatable_8table__schema_8inc.html#aff79e117540ff2f265041fbd3a313f94">_dirt_datatable_get_column_name_from_field_name</a> ($field_name, $delta=NULL)</td></tr>
<tr class="separator:aff79e117540ff2f265041fbd3a313f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file specifies the definitions for custom database tables created by this module. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa7b7fb145809b5d03fd4ca88f513e72c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7b7fb145809b5d03fd4ca88f513e72c">&#9670;&nbsp;</a></span>_dirt_datatable_add_column_to_data_table_schema()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_dirt_datatable_add_column_to_data_table_schema </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$schema_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$schema</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a field as a column in the data search table schema by examining its field info and instance info.</p>
<p>Assumes DIRT_SEARCH_TABLE_DATA already exists as a key in $schema and the key $schema[DIRT_SEARCH_TABLE_DATA]['fields'] also exists before this function is called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$schema_info</td><td>Array containing column name, description, and sql data for table schema </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">$schema</td><td>Array representing table schema. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa2bc2ba96af1c727040c5968114c5598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2bc2ba96af1c727040c5968114c5598">&#9670;&nbsp;</a></span>_dirt_datatable_get_column_metadata_from_active_node_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_dirt_datatable_get_column_metadata_from_active_node_field </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$schema_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns column metadata information for an active survey type field. This information is used to set/update the table schema for the data table and populate the table column metadata table.</p>
<p>In the case of field collection fields, multiple columns may be returned, each keyed by their column name (to handle all of the fields belonging to the field collection).</p>
<p>This function only handles supported field types. Furthermore, it is assumed that each survey field is only attached to one survey type (bundle). Any fields attached to more than one survey (e.g., date of survey field) must be handled as special cases.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$field_name</td><td>Field name string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$schema_only</td><td>Whether to return schema info only, or return all column metadata fields.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Array</td><td>of column information keyed by column name. If $schema_only is TRUE, this array contains schema info. Otherwise it contains column metadata fields. Returns an empty array if no information could be found or the field type is not supported. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aff79e117540ff2f265041fbd3a313f94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff79e117540ff2f265041fbd3a313f94">&#9670;&nbsp;</a></span>_dirt_datatable_get_column_name_from_field_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_dirt_datatable_get_column_name_from_field_name </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$delta</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper function to retrieve column name (in data search table) from field name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$field_name</td><td>String field machine name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$delta</td><td><em>Optional</em> Integer representing delta in case of field collection fields (optional, defaults to NULL). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad42887cff32d2bf1f63b6ac9cb67de60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad42887cff32d2bf1f63b6ac9cb67de60">&#9670;&nbsp;</a></span>dirt_datatable_get_column_info_from_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dirt_datatable_get_column_info_from_field </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entity_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$bundle_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$survey_type</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$delta</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$max_delta</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns information about the field given as input, as an output array, specifying fields for the column metadata database table and the data search table database schema.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$entity_type</td><td>String entity type for field instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$field_name</td><td>String field machine name to add as table column. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$bundle_name</td><td>String bundle name for field instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$survey_type</td><td><em>Optional</em> If $entity_type=='field_collection_item', this field specifies the overall survey type the field belongs to (optional, defaults to NULL). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$delta</td><td><em>Optional</em> Integer representing delta in case of field collection fields (optional, defaults to NULL). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$max_delta</td><td><em>Optional</em> Integer representing max delta value, i.e., cardinality of overall field collection (optional, defaults to NULL).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Array</td><td>of column info. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6c6181508a273c5cf2c61f6c18727e5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c6181508a273c5cf2c61f6c18727e5e">&#9670;&nbsp;</a></span>dirt_datatable_get_column_metadata_from_active_node_fields()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dirt_datatable_get_column_metadata_from_active_node_fields </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$schema_only</em> = <code>FALSE</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function returns column metadata information for every active survey type field (i.e., field belonging to a node type that is designated as a survey type) that is a supported field type.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="dirt__datatable_8module.html#a76e7c95dbdc9c29ce2108bb34ae64604">dirt_datatable_get_column_metadata_from_active_node_field()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$schema_only</td><td><em>Optional</em> Whether to return schema info only, or return all column metadata fields.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Array</td><td>of column information keyed by column name. If $schema_only is TRUE, each subarray contains schema info. Otherwise the subarrays contain column metadata fields. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac1f9a7bc5d7feaccafb207bb82e91f66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1f9a7bc5d7feaccafb207bb82e91f66">&#9670;&nbsp;</a></span>dirt_datatable_get_schema_info_from_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dirt_datatable_get_schema_info_from_field </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$delta</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns schema information for a field.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$field_name</td><td>String field machine name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$delta</td><td><em>Optional</em> Integer representing delta in case of field collection fields (optional, defaults to NULL).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Array</td><td>of schema info. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3030e2c6bb10f5407fe9b013a145eb61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3030e2c6bb10f5407fe9b013a145eb61">&#9670;&nbsp;</a></span>dirt_datatable_get_suggested_column_groups()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dirt_datatable_get_suggested_column_groups </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns suggested group columns for DIRT project; assumes few (if any) changes have been made to the pre-installed DIRT fields. Group columns may be altered later via the admin interface.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Array</td><td>of group info. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afd9f0909a04d9c05d36d30086f482733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd9f0909a04d9c05d36d30086f482733">&#9670;&nbsp;</a></span>dirt_datatable_get_suggested_filter_groups()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dirt_datatable_get_suggested_filter_groups </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns suggested variable filter groups for DIRT project; assumes few (if any) changes have been made to the pre-installed DIRT fields.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Array</td><td>of filter group info. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab527de6cffbcf5664354269dacc6757f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab527de6cffbcf5664354269dacc6757f">&#9670;&nbsp;</a></span>dirt_datatable_get_suggested_group_for_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dirt_datatable_get_suggested_group_for_field </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$field_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns suggested column group for input field; assumes few (if any) changes have been made to the pre-installed DIRT fields. Group columns may be altered later via the admin interface.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$field_name</td><td>Field name (machine name).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Column</td><td>group number (gid). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab441635bc7da4323a7810bdd2541163b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab441635bc7da4323a7810bdd2541163b">&#9670;&nbsp;</a></span>dirt_datatable_get_suggested_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dirt_datatable_get_suggested_label </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$bundle_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$delta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns suggested label for cases where the table column label differs from the field instance label (e.g., adding replicate numbers or hour numbers).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$label</td><td>String the field instance label that column label is based off of. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$field_name</td><td>String field machine name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$bundle_name</td><td>String bundle machine name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$delta</td><td>Integer delta.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">String</td><td>suggested label. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac72f76262f32a91445409599dba21090"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac72f76262f32a91445409599dba21090">&#9670;&nbsp;</a></span>dirt_datatable_get_suggested_length_for_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dirt_datatable_get_suggested_length_for_field </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$field_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns suggested length for database storage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$field_name</td><td>String field machine name.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Integer</td><td>suggested length for field name, or 0 if no suggested length found. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a449f729d1e50c581e40927f5ed37e5bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a449f729d1e50c581e40927f5ed37e5bb">&#9670;&nbsp;</a></span>dirt_datatable_get_table_schema()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dirt_datatable_get_table_schema </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns database table schema for this module </p>
<p>This table stores information from data access request forms so that site admins may review them later and decide to approve the account or delete the request.</p>
<p>This table stores information on the variable filter groups. The data search portal will allow the user to filter the search table by variable group, i.e., a set of variables collected within a survey type. The variable group filter options will be based on column groups (specified in the next table definition following this one).</p>
<p>This table stores information on the data search portal table column groups. Fields (table columns) will be assigned to one of these column groups.</p>
<p>Rules for column groups:</p><ol type="1">
<li>Every field must be assigned to a column group. Fields that are not assigned to a group will not be displayed in the search table.</li>
<li>Every column group must contain fields from only one survey type, as it is assumed that all fields within a column group are collected at the same frequency.</li>
<li>(Optional) A column group may be assigned to a filter group. Any column group which is not assigned to a filter group will always be displayed in the search table, e.g., the common group fields. Assigning a column group to a filter group allows the user to search the table for variables of interest, e.g., soil respiration. Multiple column groups may be assigned to the same filter group, but only if the fields within the column groups are all of the same survey type (due to the way the filter is implemented).</li>
</ol>
<p>This table stores information on the columns of the data search portal table. Note that it does not store the table data itself, but rather metadata about the table columns (e.g., which column group the column belongs to, which database field does it correspond to, whether it is visible to admins only, the order to display the columns in the table, etc.)</p>
<p>The following field denotes whether this table column is also a column in the dirt_datatable_table_data table (defined below) or its value is derived from other columns in some way. For example, "nids" is a table column that collects all nids when the table rows are grouped together by survey and month and date. It is not in the dirt_datatable_table_data table itself but derived from the nid field, hence nids is denoted a non-primary field.</p>
<p>primary_field = 1 (TRUE): this column is present in the table dirt_datatable_table_data. primary_field = 0 (FALSE): this column is not present in the table dirt_datatable_table_data.</p>
<p>The following field helps to group columns together based on database query type (prior to performing the query to populate the table).</p>
<p>The types are: Standard: The value for this column will come straight from the database query on the corresponding field. Special: Additional formatting or other manipulation required while or after performing the database query, before the final value is stored in the table column (e.g., deriving the survey month from the date of survey). Most survey fields will be "standard"; the "special" fields are primarily the fields belonging to the common column group that are handled separately. Float: The value for this column is a float, so additional formatting will be added to the database query (e.g., rounding to two decimal places).</p>
<p>Similar to the fields above, the following field helps to group columns based on the field type (prior to performing the query to populate the table). For instance, if the field is single-valued, only one result will be pulled from the database. In the case case of field collection fields, additional info is needed to perform the database query: fc_name (field collection machine name), delta (delta to query), max_delta (overall number of values expected).</p>
<p>This table stores the data search table data. Each row represents a survey node in the system. When the data search portal page is loaded, the table data is pulled from this table with a single database query. This table is dynamically updated every time a survey is created, edited, or deleted, so that the most up-to-date version is always loaded upon page refresh. While this goes against the spirit of an SQL database, it speeds up the page load time considerably to pull all of the information from one table, vs. joining in 100+ different tables to get the survey values for all surveys in the system upon page load.</p>
<p>For now, define the columns common to all surveys (e.g., survey node ID, site ID, survey date, etc.) Later we'll fill in the rest of the columns based on which fields are active.</p>

</div>
</div>
<a id="a5d2b9b69a657e7621354e0098fc3ada3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d2b9b69a657e7621354e0098fc3ada3">&#9670;&nbsp;</a></span>dirt_datatable_get_table_survey_fields()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dirt_datatable_get_table_survey_fields </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an array of all active fields attached to survey types. These fields are potential columns in the data search table.</p>
<p>Note that the assumption is that each field (other than special cases, such as date of survey) is assigned to only one survey type. Fields attached to more than one survey must be handled separately.</p>
<p>Also, group information survey fields are excluded, as they are not shown in the data search table.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Array</td><td>of field names. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
